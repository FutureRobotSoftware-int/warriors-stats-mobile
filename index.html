<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="src/style.css">

</head>

<body class="overflow-hidden bg-gray-100">

    <div x-data="{ open: false }" class="w-screen min-h-screen flex">

        <!-- Left Edge Toggle Button -->
        <button x-show="!open" @click="open = true" x-transition
            class="lg:hidden fixed top-4 left-0 z-40 w-10 h-10 bg-blue-600 bg-opacity-70 text-white text-xl rounded-r-md shadow opacity-75 transition duration-200 flex items-center justify-center">
            <img class="w-4 h-4" src="img/right-arrow.png">
        </button>

        <!-- Sidebar -->
        <aside :class="{ 'translate-x-0': open, '-translate-x-full': !open }"
            class="fixed lg:relative z-50 w-72 h-full lg:h-screen bg-white shadow-lg transform transition-transform duration-300 overflow-y-auto lg:translate-x-0 md:block">
            <div class="flex justify-between items-center p-4 pb-0">
                <h2 class="text-xl font-semibold text-gray-800">Players</h2>
                <button @click="open = false" class="text-gray-500 hover:text-gray-700 md:hidden">
                    âœ•
                </button>
            </div>

            <div class="space-y-3 p-4" x-data="playerSelection()">

                <!-- Sticky Search Bar -->
                <div class="sticky top-0 bg-white z-10 px-4 py-3 border-b">
                    <input x-model="search" type="text" placeholder="Search players..."
                        class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                </div>

                <!-- Loop -->
                <template x-for="player in filteredPlayers" :key="player.name">
                    <div class="flex items-center gap-4 p-3 bg-gray-100 rounded hover:bg-gray-200 cursor-pointer transition"
                        @click="window.renderCharts(`data/${player.data}-Shotdata.csv`); $store.selected = player.name">
                        <!-- <img src='img/user.png' alt="" class="w-10 h-10 rounded-full object-cover"> -->
                        <p class="text-gray-800 font-medium" x-text="player.name"></p>
                    </div>
                </template>

                <!-- Fallback message -->
                <template x-if="filteredPlayers.length === 0">
                    <div class="text-gray-500 italic text-center py-4">
                        No players found.
                    </div>
                </template>
            </div>
        </aside>

        <!-- Backdrop for mobile -->
        <div x-show="open" @click="open = false" x-transition.opacity class="fixed inset-0 opacity-50 bg-black z-40">
        </div>

        <!-- Main content area -->
        <main x-data x-init="$watch('$store.tab')" class="flex-1 relative overflow-hidden">

            <!-- Floating Nav-Dock -->
            <div class="absolute top-4 left-1/2 -translate-x-1/2 z-20">
                <div class="bg-white rounded-full shadow-lg px-4 py-1 flex space-x-4">
                    <button :class="$store.tab === 'resume' ? 'font-bold text-blue-600' : 'text-gray-500'"
                        @click="$store.tab = 'resume'" class="transition">
                        Resume
                    </button>
                    <button :class="$store.tab === 'filters' ? 'font-bold text-blue-600' : 'text-gray-500'"
                        @click="$store.tab = 'filters'" class="transition">
                        Filters
                    </button>
                    <button :class="$store.tab === 'charts' ? 'font-bold text-blue-600' : 'text-gray-500'"
                        @click="$store.tab = 'charts'" class="transition">
                        Charts
                    </button>
                </div>
            </div>

            <!-- Section Panels -->
            <div class="w-full h-full absolute top-0 left-0">
                <!-- Resume -->
                <!-- Resume Section -->
                <div x-show="$store.tab === 'resume'" x-data="playerDisplay()" x-init="init()" x-effect="updatePlayer()"
                    class="w-full h-full p-6 md:pt-15 flex flex-col items-center justify-start space-y-6 md:space-y-0 overflow-hidden">

                    <!-- Player Image -->
                    <div class="w-32 sm:w-auto h-32 rounded-full overflow-hidden shadow-lg sm:mb-1">
                        <img :src="selectedPlayer.img" alt="Player Image" class="object-cover w-full h-full" />
                    </div>

                    <!-- Player Name + Number -->
                    <div class="text-center">
                        <h2 class="text-2xl font-bold text-gray-800" x-text="selectedPlayer.name"></h2>
                        <p class="text-gray-500 text-lg">#<span x-text="selectedPlayer.number"></span></p>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-2 gap-4 w-full max-w-xl text-sm md:text-base">
                        <div class="bg-white p-4 rounded shadow text-center">
                            <p class="font-semibold text-gray-600">Position</p>
                            <p class="text-gray-800" x-text="selectedPlayer.position"></p>
                        </div>

                        <div class="bg-white p-4 rounded shadow text-center">
                            <p class="font-semibold text-gray-600">PPG</p>
                            <p class="text-gray-800" x-text="selectedPlayer.ppg"></p>
                        </div>

                        <div class="bg-white p-4 rounded shadow text-center">
                            <p class="font-semibold text-gray-600">Preferred Action</p>
                            <p class="text-gray-800" x-text="selectedPlayer.preferredAction"></p>
                        </div>

                        <div class="bg-white p-4 rounded shadow text-center">
                            <p class="font-semibold text-gray-600">Make/Miss</p>
                            <p class="text-gray-800" x-text="selectedPlayer.makeMissRatio"></p>
                        </div>
                    </div>

                </div>

                <!-- Filters Section -->
                <div x-show="$store.tab === 'filters'" x-data="getFilters()"
                    class="w-full h-full p-6 pt-15 overflow-y-auto">
                    <div x-data="filtersUI()" class="grid grid-cols-4 gap-4">

                        <template x-for="(group, index) in filterCategories" :key="group.category">
                            <div class="bg-white rounded shadow">
                                <!-- Category Header -->
                                <button
                                    class="w-full text-left px-4 py-3 font-semibold text-gray-800 border-b flex justify-between items-center"
                                    @click="toggleCategory(index)">
                                    <span x-text="group.category"></span>
                                    <svg :class="openCategories.includes(index) ? 'rotate-180' : ''"
                                        class="w-4 h-4 transition-transform" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7" />
                                    </svg>
                                </button>

                                <!-- Category Options -->
                                <div x-show="openCategories.includes(index)" class="px-4 py-3 space-y-2 border-t">
                                    <!-- ALL TOGGLE -->
                                    <div class="flex items-center justify-between">
                                        <label class="text-gray-700 font-medium">All</label>
                                        <input type="checkbox"
                                            @change="toggleAll(group.category, $event.target.checked)"
                                            :checked="isAllSelected(group.category)"
                                            class="form-checkbox h-5 w-5 text-blue-600" />
                                    </div>

                                    <!-- INDIVIDUAL OPTIONS -->
                                    <template x-for="option in group.options" :key="option">
                                        <div class="flex items-center justify-between">
                                            <label class="text-gray-600" x-text="option"></label>
                                            <input type="checkbox" :checked="isActive(group.category, option)"
                                                @change="toggleOption(group.category, option)"
                                                class="form-checkbox h-5 w-5 text-blue-600" />
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </template>

                    </div>
                </div>

                <!-- Charts Section -->
                <div x-show="$store.tab === 'charts'" class="relative w-full h-full px-6 py-6 pt-15">

                    <!-- Main carousel -->
                    <div class="embla embla--main">
                        <div class="embla__viewport">
                            <div class="embla__container">
                                <div class="embla__slide embla__slide--bar">
                                    <canvas id="barChart1"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--pie">
                                    <canvas id="pieDD"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--pie">
                                    <canvas id="pieFG"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--pie">
                                    <canvas id="pieFoot"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--bar wide">
                                    <canvas id="pieArea"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--bar wide">
                                    <canvas id="pieAction"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--pie">
                                    <canvas id="piePass"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--pie">
                                    <canvas id="piePlay"></canvas>
                                </div>
                                <div class="embla__slide embla__slide--bar wide">
                                    <canvas id="pieOff"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Thumbnail carousel -->
                    <div class="embla embla--thumb" x-data="renderCharts()">
                        <div class="embla__viewport">
                            <div class="embla__container">
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbBarChart1"></canvas>
                                </div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPieDD"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPieFG"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPieFoot"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPieArea"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPieAction"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPiePass"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPiePlay"></canvas></div>
                                <div class="embla__slide border-2 border-(--color-warriors-gold)"><canvas
                                        id="thumbPieOff"></canvas></div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
    </div>

    </main>

    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>